(()=>{"use strict";var e,t,n,a={6603:(e,t,n)=>{var a=n(7294),i=n(745),l=n(9250),r=n(932);const o=()=>{const e=Math.max(document.body.offsetWidth,document.documentElement.offsetWidth,document.body.clientWidth,document.documentElement.clientWidth),[t,n]=(0,a.useState)(e||769),i={isMicroMobile:t<=320,isMobile:t<=510,isTab:t>510&&t<821,isLaptop:t>820&&t<1440,isDesktop:t>=1440};return(0,a.useEffect)((()=>{c(n,new Event(""));const e=c.bind(void 0,n);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,a.useEffect)((()=>{i.isMicroMobile=t<=320,i.isMobile=t<=510,i.isTab=t>510&&t<821,i.isLaptop=t>820&&t<1440,i.isDesktop=t>=1440}),[t]),i};function c(e,t){e(Math.max(document.body.offsetWidth,document.documentElement.offsetWidth,document.body.clientWidth,document.documentElement.clientWidth))}var s=n(743);const d=s.v9,m=()=>(0,s.I0)();var u=n(4268);const p=(0,u.oM)({name:"activeSectionState",initialState:{section:"news",activeNews:null},reducers:{setSection:(e,t)=>{let{payload:n}=t;e.section=n},setActiveNews:(e,t)=>{let{payload:n}=t;e.activeNews=n}}}),{setSection:h,setActiveNews:f}=p.actions,g=p;let v=!1;const w=(0,a.memo)((()=>{const e=m(),{Container:t,Item:n,IconBox:i,Icon:l,ItemText:c}=(()=>{const e=o();return{Container:r.Z.div({position:"absolute",bottom:"0vh",left:"0",height:"5em",maxHeight:"5em",width:"100vw",minHeight:"5em",display:"flex",justifyContent:"space-between",backgroundColor:"#E3E3E3",padding:"0.5rem 2rem",WebkitTapHighlightColor:"transparent",boxShadow:"0 0 5px 1px #00000010",zIndex:"100"}),Item:r.Z.div({display:"flex",flexDirection:"column",gap:"0em",alignItems:"center",justifyContent:"center",color:"#6E777F",transition:"0.3s","&.active":{color:"#000"}}),IconBox:r.Z.div({}),Icon:r.Z.div({fontSize:"2.5em",color:"inherit"}),ItemText:r.Z.div({fontWeight:700,fontSize:"14px",color:"inherit",letterSpacing:"-0.43px"}),size:e}})(),s=d((e=>e.activeSectionState.section)),u=(0,a.useRef)(null),p=(0,a.useRef)(null),g=(0,a.useRef)(null);return(0,a.useEffect)((()=>{setTimeout((()=>{var e,t,n,a,i,l,r,o,c;"news"==s&&(null===(e=u.current)||void 0===e||e.classList.add("active"),null===(t=p.current)||void 0===t||t.classList.remove("active"),null===(n=g.current)||void 0===n||n.classList.remove("active"));"raiting"==s&&(null===(a=u.current)||void 0===a||a.classList.remove("active"),null===(i=p.current)||void 0===i||i.classList.add("active"),null===(l=g.current)||void 0===l||l.classList.remove("active"));"profile"==s&&(null===(r=u.current)||void 0===r||r.classList.remove("active"),null===(o=p.current)||void 0===o||o.classList.remove("active"),null===(c=g.current)||void 0===c||c.classList.add("active"))}),300),setTimeout((()=>{v=!1,document.body.classList.remove("liteBlur"),setTimeout((()=>{document.body.classList.remove("notPointer")}),150)}),300)})),a.createElement(t,null,a.createElement(n,{ref:u,onClick:()=>{v=!0,document.body.classList.add("notPointer"),document.body.classList.add("liteBlur"),setTimeout((()=>{e(h("news")),e(f(null)),setTimeout((()=>{E()}),500)}),300)}},a.createElement(i,null,a.createElement(l,{className:"icon-news"})),a.createElement(c,null,"Новости")),a.createElement(n,{ref:p,onClick:()=>{v=!0,document.body.classList.add("notPointer"),document.body.classList.add("liteBlur"),setTimeout((()=>{e(h("raiting")),setTimeout((()=>{E()}),500)}),300)}},a.createElement(i,null,a.createElement(l,{className:"icon-raiting"})),a.createElement(c,null,"Рейтинг")),a.createElement(n,{ref:g,onClick:()=>{v=!0,document.body.classList.add("notPointer"),document.body.classList.add("liteBlur"),setTimeout((()=>{e(h("profile")),setTimeout((()=>{E()}),500)}),300)}},a.createElement(i,null,a.createElement(l,{className:"icon-profile"})),a.createElement(c,null,"Профиль")))}),(()=>!0));function E(){v&&(v=!1,document.body.classList.remove("liteBlur"),setTimeout((()=>{document.body.classList.remove("notPointer")}),150))}const y=(0,u.oM)({name:"allertState",initialState:{allert:""},reducers:{setAllert:(e,t)=>{let{payload:n}=t;e.allert=n}}}),{setAllert:x}=y.actions,b=y,Z=()=>{const e=d((e=>e.allertState.allert));return a.createElement("div",{id:"allertCopy",className:"copyAllert",style:{borderRadius:20,padding:"5px 15px",color:"#fff",backgroundColor:"#969696",position:"fixed",top:"90vh",left:"50%",minWidth:"15em",width:"fit-content",maxWidth:"90vw",textAlign:"center",whiteSpace:"nowrap",transform:"translate(-50%, -50%)",opacity:0,pointerEvents:"none",transition:"0.3s",zIndex:1e3}},e)};const C=()=>((0,a.useEffect)((()=>{const e=setInterval((()=>{window.Telegram.WebApp.expand();S()?document.documentElement.style.setProperty("--ios-padding","110px"):document.documentElement.style.setProperty("--ios-padding","0px")}),500);return()=>{clearInterval(e)}}),[]),a.createElement(a.Fragment,null));function S(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const k=()=>{const e=m(),t=(0,l.s0)(),n=(0,l.TH)(),{activeNews:i,section:r}=d((e=>e.activeSectionState));return(0,a.useEffect)((()=>{"/"==n.pathname?window.Telegram.WebApp.BackButton.hide():(window.Telegram.WebApp.BackButton.show(),window.Telegram.WebApp.BackButton.onClick((()=>{t("/")})))}),[n.pathname]),(0,a.useEffect)((()=>{"news"==r&&i?(window.Telegram.WebApp.BackButton.show(),window.Telegram.WebApp.BackButton.onClick((()=>{"news"==r&&i&&e(f(null))}))):window.Telegram.WebApp.BackButton.hide()}),[r,i]),a.createElement(a.Fragment,null)},A=(0,u.oM)({name:"adminState",initialState:{locations:[],token:"",listNews:[]},reducers:{setAdminToken:(e,t)=>{let{payload:n}=t;document.cookie=`adminToken=${n}; path=/;`,e.token=n},setAdminLocation:(e,t)=>{let{payload:n}=t;e.locations=n},setAdminNewsList:(e,t)=>{let{payload:n}=t;e.listNews=n}}}),{setAdminToken:I,setAdminLocation:B,setAdminNewsList:z}=A.actions,T=A,N=()=>d((e=>e.authBlurState.blur))?a.createElement("div",{style:{width:"100%",height:"100%",position:"fixed",backgroundColor:"#fff",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3}},"Ваша кандидатура на рассмотрении"):a.createElement(a.Fragment,null),L=(0,a.createContext)({}),D=()=>{const{pathname:e}=(0,l.TH)();return(0,a.useEffect)((()=>{const e=function(e){const t=e.target.closest(".allow-scroll"),n=window.scrollY<=0,a=window.scrollY>=document.body.scrollHeight-window.innerHeight;t||!n&&!a||e.preventDefault()};return document.addEventListener("touchmove",e,{passive:!1}),()=>{document.removeEventListener("touchmove",e)}})),e.includes("admin")&&(()=>{const e=m();let t=document.cookie.split(";").filter((e=>e.includes("adminToken")))[0];if(t){if(t=t.split("adminToken=")[1],""==t||"undefined"==t)return;e(I(t))}})(),(0,a.useEffect)((()=>{e.includes("admin")?document.body.setAttribute("style","background: #fff"):document.body.setAttribute("style","")})),a.createElement(L.Provider,{value:"val"},a.createElement(N,null),a.createElement(Z,null),a.createElement(k,null),a.createElement(C,null),a.createElement(l.j3,null),e.includes("admin")?"":a.createElement(w,null))},W={avatarGray:"#"},F=()=>{const e=o(),{}=W,t=S();return{Container:r.Z.div({position:"sticky",top:"10vh",left:"0",height:"calc(100dvh - (5em + 100dvh))",width:"100vw",minHeight:"100dvh",maxHeight:"100dvh",overflow:"auto",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:t?"start":"center",gap:"3vh"}),size:e}},j=n.p+"50cc68feddee150d10d9.png",P={"01":"Января","02":"Февраля","03":"Марта","04":"Апреля","05":"Мая","06":"Июня","07":"Июля","08":"Августа","09":"Сентября",10:"Октября",11:"Ноября",12:"Декабря"},O=e=>{var t;let{item:n,full:i}=e;const l=m(),{Container:c,Image:s,TextBox:d,Title:u,Text:p,MainContent:h,TextBoxFull:g}=(()=>{const e=o();return{Container:r.Z.div({borderRadius:"10px",display:"flex",flexDirection:"column"}),Image:r.Z.img({width:"100%",aspectRatio:"2.25/1",borderRadius:"10px 10px 0 0 "}),TextBox:r.Z.div({background:"#fff",display:"flex",flexDirection:"column",gap:"0.35em",padding:"1em",flex:"0 1 auto",borderRadius:"0 0 10px 10px"}),TextBoxFull:r.Z.div({background:"#fff",display:"flex",flexDirection:"column",gap:"0.35em",padding:"1em",flex:"0 1 auto",borderRadius:"10px 10px 0 0"}),Title:r.Z.div({fontSize:"20px",transform:"scale(1, 0.95)",fontWeight:700,letterSpacing:"-0.43px"}),Text:r.Z.div({fontSize:"14px",fontWeight:600,letterSpacing:"-0.43px",transform:"scale(1, 0.9)"}),MainContent:r.Z.div({fontSize:"14px",fontWeight:600,letterSpacing:"-0.43px"}),size:e}})(),v=null===(t=n.publishDate)||void 0===t?void 0:t.split("T")[0].split("-");return a.createElement(c,{onClick:()=>{l(f(n))}},i&&a.createElement(g,null,a.createElement(u,{style:{fontSize:25}},n.title),a.createElement(p,{style:{fontSize:16,fontWeight:700}},`${v?v[2]:""} ${v?P[v[1]]:""} ${v?v[0]:""}`||"Дата не указана")),a.createElement(s,{style:i?{borderRadius:0,boxShadow:"0 3px 3px 1px #00000030",zIndex:1}:{},src:n.images&&n.images[0]?"data:image/jpeg;base64,"+n.images[0]:j}),a.createElement(d,null,!i&&a.createElement(a.Fragment,null,a.createElement(u,null,n.title),a.createElement(p,null,`${v?v[2]:""} ${v?P[v[1]]:""} ${v?v[0]:""}`||"Дата не указана")),i&&a.createElement(h,{style:{fontSize:16,fontWeight:700}},n.content)))},U="https://mini-pims.ru";var M=n(848),$=n(5673);const R=(0,M.LC)({reducerPath:"userApi",baseQuery:(0,$.ni)({baseUrl:U}),endpoints:e=>({authorize:e.mutation({query:e=>{let{dto:{tgId:t,phoneNumber:n,firstName:a,lastName:i,username:l,photoUrl:r,authDate:o,hash:c},file:s}=e;return{url:"/api/auth/telegram",method:"POST",body:{tgId:t,phoneNumber:n,firstName:a,lastName:i,username:l,photoUrl:r,authDate:o,hash:c}}}}),registration:e.mutation({query:e=>{let{dto:{tgId:t,phoneNumber:n,firstName:a,lastName:i,username:l,photoUrl:r,authDate:o,hash:c},file:s}=e;return{url:"/api/users/register",method:"POST",body:{tgId:t,phoneNumber:n,firstName:a,lastName:i,username:l,photoUrl:r,authDate:o,hash:c}}}}),getNews:e.query({query:e=>({url:"/api/news/all",params:{page:0,size:100},headers:{Authorization:`Bearer ${e}`}})}),getLocation:e.query({query:e=>({url:"/api/location/all",params:{page:0,size:100},headers:{Authorization:`Bearer ${e}`}})}),getProfile:e.query({query:e=>{let{userToken:t,userUid:n}=e;return{url:`/api/users/tgprofile/${n}`,params:{tgId:n},headers:{Authorization:`Bearer ${t}`}}}})})}),_=e=>{var t;let{}=e;const{Container:n,Title:i,Main:l,BackCircle:c,BackCircleMain:s,BackCircleYellow:m,BackCircleGray:u,ImageAbsolute:p}=(()=>{const e=o();return{Container:r.Z.div({padding:"38px 1em 5px",display:"flex",flexDirection:"column",gap:"36px",maxHeight:"calc(100vh - 80px)",position:"relative",overscrollBehavior:"contain"}),BackCircle:r.Z.div({position:"absolute",width:"115.5vw",height:"43.5vh",top:"6vh",left:"50%",transform:"translate(-50%, 0)",zIndex:0}),BackCircleMain:r.Z.div({width:"100%",height:"100%",position:"relative"}),BackCircleYellow:r.Z.div({position:"absolute",top:0,left:"50%",transform:"translate(-50%, 0)",width:"100%",height:"90%",backgroundColor:"#FFF2D3",filter:"blur(100px)",borderRadius:"50%"}),BackCircleGray:r.Z.div({position:"absolute",bottom:"0",left:"50%",transform:"translate(-50%, 0)",width:"60%",height:"47%",backgroundColor:"#FFD08A",filter:"blur(300px)",borderRadius:"50%"}),Title:r.Z.div({textAlign:"center",fontWeight:600,fontSize:"40px",zIndex:1,transform:"scale(1, 0.857)"}),Main:r.Z.div({display:"flex",flexDirection:"column",gap:"1em",overflow:"auto",zIndex:1,borderRadius:10}),ImageAbsolute:r.Z.div({position:"fixed",height:"1em"}),size:e}})(),h=d((e=>e.userState.token)),f=R.useGetNewsQuery(h),g=d((e=>e.activeSectionState.activeNews));return a.createElement(n,{className:"allow-scroll"},a.createElement(i,null,"PIMS News"),a.createElement(c,null,a.createElement(s,null,a.createElement(m,null),a.createElement(u,null))),g?a.createElement(p,{style:{top:"5.5em",left:"0.5em"},className:"icon-Good-news"}):a.createElement(a.Fragment,null,a.createElement(p,{style:{top:"0.5em",left:"0.5em"},className:"icon-whats-up-out-there"}),a.createElement(p,{style:{top:"5.5em",right:"0.5em"},className:"icon-insider-news"})),a.createElement(l,null,g?a.createElement(O,{item:g,full:!0}):null===(t=f.data)||void 0===t?void 0:t.content.map(((e,t)=>a.createElement(O,{key:t,item:e})))))},q=n.p+"7ef03775efb027bc9d4f.png",G=n.p+"921dc23a40ad44b00a40.png",H=e=>{var t;let{user:n}=e;const{Container:i,Title:l,Main:c,Achievement:s,AchievementTitle:d,AchievementText:m}=(()=>{const e=o();return{Container:r.Z.div({marginTop:"2em",display:"flex",flexDirection:"column",gap:"2em",zIndex:"2",width:"100%",minWidth:"calc(100vw - 2em)"}),Title:r.Z.div({fontSize:"28px",fontWeight:700,textAlign:"center",transform:"scale(1, 1)",letterSpacing:"-0.43px"}),Main:r.Z.div({display:"grid",gridTemplateRows:"repeat(2, calc((100vw - 50px) / 3))",gridAutoColumns:"calc((100vw - 50px) / 3)",gridAutoFlow:"column",gap:"5px",overflowX:"auto",overflowY:"hidden",padding:"50px",margin:"-50px",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"},width:"calc(100vw + 50px)",boxSizing:"border-box"}),Achievement:r.Z.div({width:"calc((100vw - 50px) / 3)",minWidth:"calc((100vw - 50px) / 3)",aspectRatio:1,display:"flex",flexDirection:"column",justifyContent:"space-between",padding:"10px",boxShadow:"0 14px 50px 0 #42424220",borderRadius:10,"&.type1":{backgroundColor:"#EBEBEB"},"&.type2":{backgroundColor:"#fff"},"&.type3":{backgroundColor:"#FA8E7C"},"&.type4":{backgroundColor:"#FFE4D3"},"&.type5":{background:"linear-gradient(180deg,rgba(252, 185, 167, 1) 50%, rgba(252, 185, 167, 1) 50%)"}}),AchievementTitle:r.Z.div({fontSize:"20px",fontWeight:700,transform:"scale(1, 1)","&.number":{fontSize:"32px",transform:"scale(1, 1)"}}),AchievementText:r.Z.div({fontWeight:600,fontSize:"14px",transform:"scale(1.1, 0.9)",letterSpacing:"0.025px",lineHeight:"1em"}),size:e}})(),u=null==n?void 0:n.employeeAwards.map(((e,t)=>function(e){let t=1;[0].includes(e%6)&&(t=1);[1].includes(e%6)&&(t=1);[2].includes(e%6)&&(t=2);[3].includes(e%6)&&(t=2);[4].includes(e%6)&&(t=5);[5].includes(e%6)&&(t=3);[6].includes(e%6)&&(t=3);[7].includes(e%6)&&(t=2);return t}(t+1)));return a.createElement(i,null,a.createElement(l,null,"Your achievements"),0==(null==n?void 0:n.employeeAwards.length)&&a.createElement("div",{style:{textAlign:"center",width:"100%"}},"Пока что здесь пусто"),a.createElement(c,null,null==n||null===(t=n.employeeAwards)||void 0===t?void 0:t.map(((e,t)=>a.createElement(s,{className:`type${u[t]}`},a.createElement(d,{className:""+(Number.isNaN(+e.awardTitle)?"":"number")},e.awardTitle),a.createElement(m,null,e.awardDescription))))))};const Q=n.p+"9e9518e6d175c8e46e37.png",V=e=>{let{}=e;const t=window.Telegram.WebApp,{Container:n,BackCircle:i,BackCircleMain:l,BackCircleYellow:c,BackCircleGray:s,ImageAbsolute:m,Avatar:u,UserName:p,Phone:h,AvatarBox:f,ImageAbsoluteDiv:g}=(()=>{const e=o();return{Container:r.Z.div({padding:"3.5em 0 5px",display:"flex",flexDirection:"column",alignItems:"center",justifyItems:"center",gap:"1em",height:"calc(100vh - 80px)",maxHeight:"calc(100vh - 80px)",position:"relative",overflowY:"auto",overflowX:"hidden",overscrollBehavior:"contain"}),AvatarBox:r.Z.div({position:"relative"}),BackCircle:r.Z.div({position:"absolute",width:"115.5vw",height:"43.5vh",top:"6vh",left:"50%",transform:"translate(-50%, 0)",zIndex:0}),BackCircleMain:r.Z.div({width:"100%",height:"100%",position:"relative"}),BackCircleYellow:r.Z.div({position:"absolute",top:0,left:"50%",transform:"translate(-50%, 0)",width:"100%",height:"90%",backgroundColor:"#FFF2D3",filter:"blur(100px)",borderRadius:"50%"}),BackCircleGray:r.Z.div({position:"absolute",bottom:"0",left:"50%",transform:"translate(-50%, 0)",width:"60%",height:"47%",backgroundColor:"#FFD08A",filter:"blur(300px)",borderRadius:"50%"}),Avatar:r.Z.img({width:"30vw",minWidth:"30vw",minHeight:"30vw",aspectRatio:1,zIndex:1,boxShadow:"0 0 3px 1px #00000010",borderRadius:"50%",overflow:"hidden"}),UserName:r.Z.div({zIndex:1,fontSize:"30px",fontWeight:600,textAlign:"center",transform:"scale(1, 0.866)",letterSpacing:"-0.43px"}),Phone:r.Z.div({zIndex:1,fontSize:"26px",fontWeight:600,textAlign:"center",transform:"scale(1, 0.866)",letterSpacing:"-0.43px"}),ImageAbsolute:r.Z.img({position:"fixed",height:"1em"}),ImageAbsoluteDiv:r.Z.div({position:"fixed",height:"1em"}),size:e}})(),v=d((e=>e.userState.token)),w=R.useGetProfileQuery({userToken:v,userUid:t.initDataUnsafe.user.id});return a.createElement(n,{className:"allow-scroll"},a.createElement(i,null,a.createElement(l,null,a.createElement(c,null),a.createElement(s,null))),a.createElement(f,null,a.createElement(u,{style:{background:`url(${Q}) 100%/100%`},src:`https://t.me/i/userpic/160/${t.initDataUnsafe.user.id}.jpg`,onLoad:e=>{e.target.width<10&&(e.target.src=Q)}}),a.createElement(g,{style:{top:"-25%",left:"-20%",height:"3em",fontSize:"3em",position:"absolute"},className:"icon-Heeyysexy"})),a.createElement(p,null,t.initDataUnsafe.user.first_name," ",t.initDataUnsafe.user.last_name),a.createElement(h,null,"+7999 999 99 99"),a.createElement("div",{style:{position:"relative",zIndex:10}},a.createElement(m,{style:{top:"-6em",left:"-1em",height:"12em",position:"absolute"},src:G}),a.createElement(H,{user:w.data})),a.createElement(m,{style:{top:"0em",right:"0",height:"10em",position:"absolute"},src:q}),a.createElement(g,{style:{bottom:"6em",right:"1em"},className:"icon-Nice-work"}))},Y=e=>{var t;let{item:n,itemNum:i,user:l}=e;const{Container:c,TextBox:s,Title:d,Text:m,MainContent:u,TitleNum:p}=(()=>{const e=o();return{Container:r.Z.div({borderRadius:"10px",overflow:"hidden"}),TextBox:r.Z.div({background:"#fff",display:"flex",flexDirection:"column",flex:"1 1",gap:"4px",padding:"10px 20px 8px","&.active":{backgroundColor:"#FFE3A6"}}),TitleNum:r.Z.span({fontSize:"20px",transform:"scale(1, 0.85)",fontWeight:600,letterSpacing:"0.43px"}),Title:r.Z.div({fontSize:"20px",transform:"scale(1, 0.9)",fontWeight:600,letterSpacing:"-0.43px"}),Text:r.Z.div({fontSize:"16px",letterSpacing:"-0.43px",transition:"0.3s",fontWeight:600,transform:"scale(1, 0.82)","&.hide":{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",minHeight:"1em"},"&.open":{height:"inherit",minHeight:"1em",overflow:"hidden",wordWrap:"break-word"}}),MainContent:r.Z.div({fontSize:"0.875em"}),size:e}})();return(0,a.useEffect)((()=>{X()})),a.createElement(c,{"data-raiting-item":!0},a.createElement(s,{"data-raiting-item":!0,className:n.id==l.location.id?"active":""},a.createElement(d,null,a.createElement(p,null,i,".","  "),n.name),a.createElement(m,{id:"textBlock",onClick:e=>{e.target.className.includes("hide")?(e.target.classList.add("open"),e.target.classList.remove("hide"),X()):(e.target.classList.remove("open"),e.target.classList.add("hide"),setTimeout((()=>{X()}),300))},className:"hide"},"Награды: ",0==n.locationAwards.length?"пока нет":""," ",null===(t=n.locationAwards)||void 0===t?void 0:t.map(((e,t)=>0==t?e.awardTitle:", "+e.awardTitle)))))};function X(){document.querySelectorAll("[data-raiting-item]").forEach((e=>{const t=e.querySelector("#textBlock"),n=((null==t?void 0:t.scrollHeight)||0)+36;e.setAttribute("style",`height: ${n}px; min-height: ${n}px ; max-height: ${n}px`)}))}const J=e=>{var t;let{}=e;const n=window.Telegram.WebApp,{Container:i,Title:l,Main:c,BackCircle:s,BackCircleMain:m,BackCircleYellow:u,BackCircleGray:p,ImageAbsolute:h,ImageAbsoluteDiv:f}=(()=>{const e=o();return{Container:r.Z.div({padding:"2.5em 1em 5px",display:"flex",flexDirection:"column",gap:"2.5em",maxHeight:"calc(100vh - 80px)",position:"relative",paddingBottom:"5em",overscrollBehavior:"contain"}),BackCircle:r.Z.div({position:"absolute",width:"115.5vw",height:"43.5vh",top:"6vh",left:"50%",transform:"translate(-50%, 0)",zIndex:0}),BackCircleMain:r.Z.div({width:"100%",height:"100%",position:"relative"}),BackCircleYellow:r.Z.div({position:"absolute",top:0,left:"50%",transform:"translate(-50%, 0)",width:"100%",height:"90%",backgroundColor:"#FFF2D3",filter:"blur(100px)",borderRadius:"50%"}),BackCircleGray:r.Z.div({position:"absolute",bottom:"0",left:"50%",transform:"translate(-50%, 0)",width:"60%",height:"47%",backgroundColor:"#FFD08A",filter:"blur(300px)",borderRadius:"50%"}),Title:r.Z.div({textAlign:"center",fontWeight:600,fontSize:"40px",zIndex:1,transform:"scale(1, 0.857)"}),Main:r.Z.div({position:"relative",display:"flex",flexDirection:"column",gap:"5px",overflow:"auto",minHeight:"calc(100vh - 80px - 8em );",height:"calc(100vh - 80px - 8em );",zIndex:1,borderRadius:10}),ImageAbsolute:r.Z.img({position:"fixed",height:"1em"}),ImageAbsoluteDiv:r.Z.div({position:"fixed",height:"1em"}),size:e}})(),g=d((e=>e.userState.token)),v=R.useGetLocationQuery(g),w=R.useGetProfileQuery({userToken:g,userUid:n.initDataUnsafe.user.id});return a.createElement(i,{className:"allow-scroll"},a.createElement(l,null,"Locations Rating"),a.createElement(s,null,a.createElement(m,null,a.createElement(u,null),a.createElement(p,null))),a.createElement(h,{style:{top:"0em",right:"0",height:"7em"},src:q}),a.createElement(h,{style:{bottom:"10em",left:"0",height:"12em"},src:G}),a.createElement(c,null,null===(t=v.data)||void 0===t?void 0:t.content.map(((e,t)=>a.createElement(Y,{key:t,item:e,user:w.data,itemNum:t+1}))),a.createElement("div",{style:{flex:"1 1",display:"flex",flexDirection:"column",justifyContent:"end",alignItems:"center"}},a.createElement(f,{style:{position:"relative",minHeight:"1.25em",fontSize:"1.25em",marginTop:"1em"},className:"icon-Your-location-is-colored"}))))},K=()=>{const{Container:e}=F(),t=m(),n=d((e=>e.activeSectionState.section));return(0,a.useEffect)((()=>{const e=localStorage.getItem("path");t(h(e||"news"))}),[]),(0,a.useEffect)((()=>{localStorage.setItem("path",n)}),[n]),"news"==n?a.createElement(_,null):"profile"==n?a.createElement(V,null):"raiting"==n?a.createElement(J,null):void 0};var ee=n(3537),te=n(540),ne=n(3577),ae=n(6545),ie=n(6052),le=n(1107),re=n(7046),oe=n(5044),ce=n(4646),se=n(5475),de=n(6526),me=n(4938),ue=n(2655);const pe=()=>{const e=o();return{Container:r.Z.div({}),FromWrapper:r.Z.div({display:"flex",flexDirection:"column",gap:"1em",width:"40vw"}),FormLoginBox:r.Z.div({display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100vh"}),FormLoginBox:r.Z.div({display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100vh"}),size:e}},he=()=>{const e=o();return{Container:r.Z.div({display:"flex",flexDirection:"column",gap:"5em"}),Item:r.Z.div({display:"flex",flexDirection:"column",gap:"1em"}),ItemTitle:r.Z.div({}),CardList:r.Z.div({display:"flex",gap:"calc((80vw - 19vw * 4) / 3)",flexWrap:"wrap",justifyContent:"space-between"}),FromWrapper:r.Z.div({display:"flex",flexDirection:"column",gap:"1em",width:"40vw"}),FormLoginBox:r.Z.div({display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100vh"}),size:e}};var fe=n(7318),ge=n(1101),ve=n(6032),we=n(765),Ee=n(8945),ye=n(5879),xe=n(7807),be=n(7233),Ze=n(3255),Ce=n(7630),Se=n(714),ke=n(8646),Ae=n(9598),Ie=n(8928),Be=n(4202),ze=n(6910),Te=n(2861);const Ne=e=>{let{content:t,actions:n,names:i,typeCard:l,initChip:r,confirmButton:o,list:c,refetch:s,locations:m}=e;const u=d((e=>e.adminState.token));return a.createElement(we.Z,{sx:{flex:c?"1 1":"0 0 19vw",width:"80vw",minWidth:"19vw",maxWidth:c?"100%":"19vw",display:"flex",flexDirection:c?"row":"column"}},a.createElement(xe.Z,null,!c&&a.createElement(ye.Z,{component:"img",height:"140",image:t.image?t.image:j,alt:"green iguana"}),a.createElement(Ee.Z,null,a.createElement(re.Z,{gutterBottom:!0,variant:"h5",component:"div"},t.title),a.createElement(re.Z,{variant:"body2",sx:{color:"text.secondary"}},t.text),t.text2&&a.createElement(re.Z,{variant:"body2",sx:{color:"text.secondary"}},t.text2))),n&&i?a.createElement(be.Z,{style:{width:c?"50vw":"",paddingRight:"1.5em",display:"flex",flexDirection:"column"}},a.createElement(We,{names:i,initChip:r,typeCard:l,list:c}),"user"==l&&a.createElement(Fe,{content:t,locations:m,list:!0})):"",a.createElement("div",{style:{flex:"1 1"}}),"addUser"==l&&a.createElement(Fe,{content:t,locations:m}),"addUser"!=l&&a.createElement(ze.Z,{onClick:()=>{"location"==l&&(console.log(i),(async(e,t,n)=>{await Te.Z.delete(`https://mini-pims.ru/api/admin/delete/location/${t}`,{params:{locationId:t},headers:{"Content-Type":"multipart/form-data",Accept:"application/json",Authorization:`Bearer ${e}`}}),n&&n()})(u,t.id,s)),"user"==l&&(console.log(i),(async(e,t,n)=>{await Te.Z.delete(U+"/api/admin/delete/user/{userId}",{params:{userId:t},headers:{"Content-Type":"multipart/form-data",Accept:"application/json",Authorization:`Bearer ${e}`}}),n&&n()})(u,t.id,s)),"addAwards"==l&&(console.log(i),(async(e,t,n)=>{await Te.Z.delete(U+"/api/admin/delete/award/{awardId}",{params:{awardId:t},headers:{"Content-Type":"multipart/form-data",Accept:"application/json",Authorization:`Bearer ${e}`}}),n&&n()})(u,t.id,s)),"news"==l&&(console.log(i),(async(e,t,n)=>{await Te.Z.delete(U+"/api/admin/delete/news/{newsId}",{params:{newsId:t},headers:{"Content-Type":"multipart/form-data",Accept:"application/json",Authorization:`Bearer ${e}`}}),n&&n()})(u,t.id,s))},sx:{margin:"1em",minWidth:"10em"},variant:"outlined",color:"error"},"Удалить"),o?a.createElement(je,{confirmButton:o}):"")},Le={PaperProps:{style:{maxHeight:224}}};function De(e,t,n){return{fontWeight:t.includes(e)?n.typography.fontWeightMedium:n.typography.fontWeightRegular}}function We(e){let{names:t,initChip:n,typeCard:i,list:l}=e;const r=(0,Ze.Z)(),o=(m(),d((e=>e.adminState.token))),[c,s]=a.useState(n||[]);return a.createElement("div",null,a.createElement(Ae.Z,{sx:{m:1,width:l?"40vw":"calc(19vw - 2em)"}},a.createElement(Se.Z,{id:"demo-multiple-chip-label"},"Награды"),a.createElement(Ie.Z,{labelId:"demo-multiple-chip-label",id:"demo-multiple-chip",multiple:!0,value:c,onChange:e=>{const{target:{value:n}}=e,a=t.find((e=>e.title==n[n.length-1])),l=null==a?void 0:a.id,r=null==a?void 0:a.targetId;l&&r&&("user"==i?(async(e,t,n,a)=>{await Te.Z.post(U+"/api/admin/assign-user-award",{awardId:n,targetId:a},{headers:{Authorization:`Bearer ${t}`}})})(0,o,l,r):(async(e,t,n,a)=>{await Te.Z.post(U+"/api/admin/assign-location-award",{awardId:n,targetId:a},{headers:{Authorization:`Bearer ${t}`}})})(0,o,l,r)),s("string"==typeof n?n.split(","):n)},input:a.createElement(Ce.Z,{id:"select-multiple-chip",placeholder:"Награды",label:"Награды"}),renderValue:e=>a.createElement(ee.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5}},e.map((e=>a.createElement(Be.Z,{key:e,label:e})))),MenuProps:Le},t.map((e=>a.createElement(ke.Z,{key:e.id,value:e.title,style:De(e.title,c,r)},e.title))))))}function Fe(e){var t;let{initChip:n,locations:i,content:l,list:r}=e;console.log(l);const o=(0,Ze.Z)(),c=(m(),d((e=>e.adminState.token))),[s,u]=a.useState([null==l||null===(t=l.location)||void 0===t?void 0:t.name]||0);return a.createElement("div",null,a.createElement(Ae.Z,{sx:{m:1,width:r?"40vw":"calc(19vw - 2em)"}},a.createElement(Se.Z,{id:"demo-multiple-chip-label"},"Локация"),a.createElement(Ie.Z,{labelId:"demo-multiple-chip-label",id:"demo-multiple-chip",value:s,onChange:e=>{const{target:{value:t}}=e,n=null==i?void 0:i.find((e=>e.name==t));(async(e,t,n,a)=>{await Te.Z.post(`https://mini-pims.ru/api/admin/assign-user-location/${t}`,n,{params:{userId:t},headers:{Authorization:`Bearer ${e}`}}),a&&a()})(c,l.id,n.id),u("string"==typeof t?t.split(","):t)},input:a.createElement(Ce.Z,{id:"select-multiple-chip",placeholder:"Награды",label:"Награды"}),renderValue:e=>a.createElement(ee.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5}},e.map((e=>a.createElement(Be.Z,{key:e,label:e})))),MenuProps:Le},null==i?void 0:i.map((e=>a.createElement(ke.Z,{key:e.id,value:e.name,style:De(e.title,s,o)},e.name))))))}function je(e){let{confirmButton:t}=e;return a.createElement("div",{style:{display:"flex",gap:"2em",margin:"1em"}},a.createElement(ze.Z,{style:{flex:"1 1"},onClick:()=>{t.confirmFn()},variant:"contained",color:"success"},"Подтвердить"),a.createElement(ze.Z,{style:{flex:"1 1"},onClick:()=>{t.rejectFn()},variant:"contained",color:"error"},"Отклонить"))}var Pe=n(6917),Oe=n(5466),Ue=n(7536);const Me=(0,M.LC)({reducerPath:"adminApi",baseQuery:(0,$.ni)({baseUrl:U}),endpoints:e=>({getNews:e.query({query:e=>({url:"/api/news/all",params:{page:0,size:100},headers:{Authorization:`Bearer ${e}`}})}),getLocation:e.query({query:e=>({url:"/api/location/all",params:{page:0,size:100},headers:{Authorization:`Bearer ${e}`}})}),getUsers:e.query({query:e=>({url:"/api/users/all",params:{page:0,size:100},headers:{Authorization:`Bearer ${e}`}})}),getAwards:e.query({query:e=>({url:"/api/awards/all",params:{page:0,size:100},headers:{Authorization:`Bearer ${e}`}})}),getPendingApprovals:e.query({query:e=>({url:"/api/admin/pending-approvals",headers:{Authorization:`Bearer ${e}`}})})})}),$e=(0,u.oM)({name:"inputsState",initialState:{searchUser:"",searchLocation:""},reducers:{setSearchUser:(e,t)=>{let{payload:n}=t;e.searchUser=n},setSearchLocation:(e,t)=>{let{payload:n}=t;e.searchLocation=n}}}),{setSearchUser:Re,setSearchLocation:_e}=$e.actions,qe=$e;function Ge(){return Ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ge.apply(this,arguments)}const He=e=>{let{}=e;const{Container:t,Item:n,ItemTitle:i,CardList:l}=he(),r=d((e=>e.adminState.token)),{data:o,refetch:c}=Me.useGetLocationQuery(r)||[],{data:s}=Me.useGetAwardsQuery(r)||[];return a.createElement(t,null,a.createElement(fe.Z,{style:{marginBottom:"-3em"}}),a.createElement(n,null,a.createElement(re.Z,{variant:"h5"},"Локации"),a.createElement(fe.Z,null),a.createElement(re.Z,null,"Создать новую"),a.createElement(Xe,{refetch:c}),a.createElement(fe.Z,null),a.createElement(re.Z,null,"Список существующих"),a.createElement(Qe,null),a.createElement(l,null,0==(null==o?void 0:o.content.length)&&a.createElement(a.Fragment,null,"Пока что пусто"),a.createElement(Ve,null))))};function Qe(){const e=m(),t=d((e=>e.inputsState.searchLocation));return a.createElement(ge.Z,{style:{width:"40vw",margin:"0"},label:"Название",id:"outlined-size-small",size:"small",value:t,onChange:t=>e(_e(t.target.value))})}function Ve(){const e=d((e=>e.adminState.token)),{data:t}=Me.useGetUsersQuery(e)||[],{data:n}=Me.useGetAwardsQuery(e)||[],{data:i,refetch:l}=Me.useGetLocationQuery(e)||[],{Container:r,Item:o,ItemTitle:c,CardList:s}=he(),m=d((e=>e.inputsState.searchLocation)),[u,p]=(0,a.useState)((null==i?void 0:i.content)||[]);return(0,a.useEffect)((()=>{p((null==i?void 0:i.content)||[])}),[t]),(0,a.useEffect)((()=>{p((e=>((null==i?void 0:i.content)||[]).filter((e=>e.name.toLowerCase().includes(m.toLowerCase())))))}),[m]),console.log(u),null==u?void 0:u.map(((e,t)=>{var i;return a.createElement(Ne,{key:e.name+t,actions:!0,content:{title:e.name,text:e.address,image:"data:image/jpeg;base64,"+e.locationImage,id:e.id},names:null==n?void 0:n.content.map((t=>({title:t.name,id:t.id,targetId:e.id}))),initChip:null===(i=e.locationAwards)||void 0===i?void 0:i.map((e=>e.awardTitle)),typeCard:"location",refetch:l})}))}const Ye=(0,Pe.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});function Xe(e){let{refetch:t}=e;const n=d((e=>e.adminState.token)),{FromWrapper:i,FormLoginBox:l}=(m(),he()),r=(0,Ue.cI)(),{handleSubmit:o,register:c,control:s}=r;return a.createElement(ee.Z,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",onSubmit:o((e=>{(async(e,t,n,a,i,l)=>{const r=JSON.stringify({name:n,address:a}),o=new FormData;o.append("location",new Blob([r],{type:"application/json"})),o.append("file",i[0]),await Te.Z.post(U+"/api/admin/create-location",o,{headers:{"Content-Type":"multipart/form-data",Accept:"application/json",Authorization:`Bearer ${t}`}}),l&&l()})(0,n,e.name,e.description,e.photo,t)}))},a.createElement(i,null,a.createElement(ge.Z,Ge({style:{width:"40vw",margin:"0"},label:"Название",id:"outlined-size-small",size:"small"},c("name",{required:!0}))),a.createElement(ge.Z,Ge({style:{width:"40vw",margin:"0"},label:"Описание",id:"outlined-size-small",size:"small"},c("description",{required:!0}))),a.createElement(ze.Z,{style:{width:"40vw"},component:"label",role:void 0,variant:"contained",tabIndex:-1,startIcon:a.createElement(Oe.Z,null)},"Добавить фото",a.createElement(Ye,Ge({type:"file"},c("photo",{required:!0}),{multiple:!0}))),a.createElement(Je,{control:s})))}function Je(e){let{control:t}=e;const n=(0,Ue.cl)({control:t});return a.createElement(ve.Z,{direction:"row",spacing:2},a.createElement(ze.Z,{type:"submit",style:{width:"40vw"},variant:"contained",disabled:!n.isValid},"Создать"))}const Ke=e=>{let{}=e;const{Container:t,Item:n,ItemTitle:i,CardList:l}=he();return a.createElement(t,null,a.createElement(fe.Z,{style:{marginBottom:"-3em"}}),a.createElement(n,null,a.createElement(re.Z,{variant:"h5"},"Сотрудники"),a.createElement(et,null),a.createElement(tt,null)))};function et(){const e=m(),t=d((e=>e.inputsState.searchUser));return a.createElement(ge.Z,{style:{width:"40vw",margin:"0"},label:"Название",id:"outlined-size-small",size:"small",value:t,onChange:t=>e(Re(t.target.value))})}function tt(){const e=d((e=>e.adminState.token)),{data:t,refetch:n}=Me.useGetUsersQuery(e)||[],{data:i}=Me.useGetAwardsQuery(e)||[],{data:l,refetch:r}=Me.useGetLocationQuery(e)||[],{Container:o,Item:c,ItemTitle:s,CardList:m}=he(),u=d((e=>e.inputsState.searchUser)),[p,h]=(0,a.useState)((null==t?void 0:t.content)||[]);return(0,a.useEffect)((()=>{h((null==t?void 0:t.content)||[])}),[t]),(0,a.useEffect)((()=>{h((e=>((null==t?void 0:t.content)||[]).filter((e=>(e.firstName+" "+e.lastName).toLowerCase().includes(u.toLowerCase())))))}),[u]),a.createElement(m,{style:{flexDirection:"column"}},0==(null==t?void 0:t.content.length)&&a.createElement(a.Fragment,null,"Пока что пусто"),p.map(((e,t)=>{var r;return a.createElement(Ne,{actions:!0,key:t,content:{title:e.firstName+" "+e.lastName,text:e.phone,id:e.id,location:e.location},names:null==i?void 0:i.content.map((t=>({title:t.name,id:t.id,targetId:e.id}))),typeCard:"user",list:!0,initChip:null===(r=e.employeeAwards)||void 0===r?void 0:r.map((e=>e.awardTitle)),locations:null==l?void 0:l.content,refetch:n})})))}function nt(){return nt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},nt.apply(this,arguments)}const at=e=>{let{}=e;const{Container:t,Item:n,ItemTitle:i,CardList:l}=he(),r=d((e=>e.adminState.token)),{data:o,refetch:c}=Me.useGetAwardsQuery(r)||[];return a.createElement(t,null,a.createElement(fe.Z,{style:{marginBottom:"-3em"}}),a.createElement(n,null,a.createElement(re.Z,{variant:"h5"},"Создать новую награду"),a.createElement(it,{refetch:c})),a.createElement(n,null,a.createElement(re.Z,{variant:"h5"},"Уже существующие награды"),a.createElement(l,null,0==(null==o?void 0:o.content.length)&&a.createElement(a.Fragment,null,"Пока что пусто"),null==o?void 0:o.content.map((e=>a.createElement(Ne,{key:e.id,content:{title:e.name,text:e.description,image:"data:image/jpeg;base64,"+e.awardImage,id:e.id},typeCard:"addAwards",refetch:c}))))))};(0,Pe.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});function it(e){let{refetch:t}=e;const n=d((e=>e.adminState.token)),{FromWrapper:i,FormLoginBox:l}=(m(),he()),r=(0,Ue.cI)(),{handleSubmit:o,register:c,control:s}=r;return a.createElement(ee.Z,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",onSubmit:o((e=>{(async(e,t,n,a,i)=>{const l=JSON.stringify({name:n,description:a}),r=new FormData;r.append("dto",new Blob([l],{type:"application/json"})),await Te.Z.post(U+"/api/admin/create-award",r,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${t}`}}),i&&i()})(0,n,e.name,e.description,t)}))},a.createElement(i,null,a.createElement(ge.Z,nt({style:{width:"40vw",margin:"0"},label:"Название",id:"outlined-size-small",size:"small"},c("name",{required:!0}))),a.createElement(ge.Z,nt({style:{width:"40vw",margin:"0"},label:"Описание",id:"outlined-size-small",size:"small"},c("description",{required:!0}))),a.createElement(lt,{control:s})))}function lt(e){let{control:t}=e;const n=(0,Ue.cl)({control:t});return a.createElement(ve.Z,{direction:"row",spacing:2},a.createElement(ze.Z,{type:"submit",style:{width:"40vw"},variant:"contained",disabled:!n.isValid},"Создать"))}function rt(){return rt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},rt.apply(this,arguments)}const ot=e=>{let{}=e;const{Container:t,Item:n,ItemTitle:i,CardList:l}=he(),r=d((e=>e.adminState.token)),{data:o,refetch:c}=Me.useGetNewsQuery(r)||[];return a.createElement(t,null,a.createElement(fe.Z,{style:{marginBottom:"-3em"}}),a.createElement(n,null,a.createElement(re.Z,{variant:"h5"},"Создать новость"),a.createElement(st,{refetch:c})),a.createElement(n,null,a.createElement(re.Z,{variant:"h5"},"Уже существующие новости"),a.createElement(l,null,0==(null==o?void 0:o.content.length)&&a.createElement(a.Fragment,null,"Пока что пусто"),null==o?void 0:o.content.map((e=>a.createElement(Ne,{key:e.id,content:{title:e.title,text:e.content,text2:e.creator,image:"data:image/jpeg;base64,"+(e.images?e.images[0]:""),id:e.id},typeCard:"news",refetch:c}))))))},ct=(0,Pe.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});function st(e){let{refetch:t}=e;const n=d((e=>e.adminState.token)),{FromWrapper:i,FormLoginBox:l}=(m(),he()),r=(0,Ue.cI)(),{handleSubmit:o,register:c,control:s,setValue:u}=r,[p,h]=(0,a.useState)([]);return(0,a.useEffect)((()=>{u("photo",p)}),[p]),a.createElement(ee.Z,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",onSubmit:o((e=>{(async(e,t,n,a,i,l,r)=>{const o=JSON.stringify({title:n,description:a,creator:i}),c=new FormData;c.append("dto",new Blob([o],{type:"application/json"})),Array.isArray(l)?l.forEach((e=>{c.append("file",e)})):(l instanceof File||l instanceof Blob)&&c.append("file",l),await Te.Z.post(U+"/api/admin/add-news",c,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"multipart/form-data",Accept:"application/json"}}),r&&r()})(0,n,e.name,e.description,e.creator,e.photo,t)}))},a.createElement(i,null,a.createElement(ge.Z,rt({style:{width:"40vw",margin:"0"},label:"Название",id:"outlined-size-small",size:"small"},c("name",{required:!0}))),a.createElement(ge.Z,rt({style:{width:"40vw",margin:"0"},label:"Описание",id:"outlined-size-small",size:"small"},c("description",{required:!0}))),a.createElement(ge.Z,rt({style:{width:"40vw",margin:"0"},label:"Автор",id:"outlined-size-small",size:"small"},c("creator",{required:!0}))),a.createElement(ze.Z,{style:{width:"40vw"},component:"label",role:void 0,variant:"contained",tabIndex:-1,startIcon:a.createElement(Oe.Z,null)},"Добавить фото",a.createElement(ct,{type:"file",onChange:e=>{const t=Array.from(e.target.files);h((e=>[...e,t[0]]))},multiple:!0})),a.createElement(dt,{control:s})))}function dt(e){let{control:t}=e;const n=(0,Ue.cl)({control:t});return a.createElement(ve.Z,{direction:"row",spacing:2},a.createElement(ze.Z,{type:"submit",style:{width:"40vw"},variant:"contained",disabled:!n.isValid},"Создать"))}const mt=e=>{let{}=e;m();const{Container:t,Item:n,ItemTitle:i,CardList:l}=he(),r=d((e=>e.adminState.token)),{data:o,refetch:c}=Me.useGetUsersQuery(r)||[],{data:s,refetch:u}=Me.useGetPendingApprovalsQuery(r)||[],{data:p,refetch:h}=Me.useGetLocationQuery(r)||[];return a.createElement(t,null,a.createElement(fe.Z,{style:{marginBottom:"-3em"}}),a.createElement(n,null,a.createElement(re.Z,{variant:"h5"},"Не подтверждённые пользователи"),a.createElement(l,null,0==(null==s?void 0:s.length)&&a.createElement(a.Fragment,null,"Пока что пусто"),null==s?void 0:s.map(((e,t)=>a.createElement(Ne,{key:t,confirmButton:{confirmFn:()=>{(async(e,t,n,a)=>{await Te.Z.post(`https://mini-pims.ru/api/admin/approve-user/${n}`,{userId:n},{headers:{Authorization:`Bearer ${t}`}}).then((e=>{a&&a()})).catch((e=>{a&&a()}))})(0,r,e.id,u)},rejectFn:()=>{(async(e,t,n,a)=>{await Te.Z.post(`https://mini-pims.ru/api/admin/decline-registration/${n}`,{userId:n},{headers:{Authorization:`Bearer ${t}`}}).then((e=>{a&&a()})).catch((e=>{a&&a()}))})(0,r,e.id,u)}},content:{title:e.firstName+" "+(e.middleName||"")+" "+e.lastName,text:e.phone,image:`https://t.me/i/userpic/160/${e.telegramId}.jpg`,id:e.id,location:e.location},typeCard:"addUser",locations:null==p?void 0:p.content,refetch:c}))))))},ut=e=>{let{activeSection:t}=e;const{Container:n}=pe();return"AssignRewardLocations"==t?a.createElement(n,null,a.createElement(He,null)):"AssignRewardUsers"==t?a.createElement(n,null,a.createElement(Ke,null)):"AddAwards"==t?a.createElement(n,null,a.createElement(at,null)):"News"==t?a.createElement(n,null,a.createElement(ot,null)):"ApprovalRegistrations"==t?a.createElement(n,null,a.createElement(mt,null)):void 0};var pt=n(8121);function ht(){const e=(()=>{const e=m();return()=>{e(I(""))}})();return a.createElement(ve.Z,{direction:"row",spacing:2},a.createElement(ze.Z,{onClick:()=>{e()},variant:"contained",endIcon:a.createElement(pt.Z,null)},"Выйти"))}function ft(){return ft=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ft.apply(this,arguments)}function gt(){const e=m(),{FromWrapper:t,FormLoginBox:n}=pe(),i=(0,Ue.cI)(),{handleSubmit:l,register:r,control:o}=i;return a.createElement(n,null,a.createElement(ee.Z,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",onSubmit:l((t=>{(async(e,t,n)=>{const a=await Te.Z.post(U+"/api/auth/admin",{username:t,password:n});e(I(a.data.token)),a.data})(e,t.userName,t.pass)}))},a.createElement(t,null,a.createElement(re.Z,{variant:"h5"},"Авторизация"),a.createElement(ge.Z,ft({style:{width:"40vw",margin:"0"},label:"Имя пользователя",id:"outlined-size-small",size:"small"},r("userName",{required:!0}))),a.createElement(ge.Z,ft({style:{width:"40vw",margin:"0"},label:"Пароль",id:"outlined-size-small",size:"small"},r("pass",{required:!0}))),a.createElement(vt,{control:o}))))}function vt(e){let{control:t}=e;const n=(0,Ue.cl)({control:t});return a.createElement(ve.Z,{direction:"row",spacing:2},a.createElement(ze.Z,{type:"submit",style:{width:"40vw"},variant:"contained",disabled:!n.isValid},"Войти"))}const wt=["Присвоить награду локациям","Присвоить награду сотрудникам","Доп. Награды","Новости","Одобрение регистраций"],Et=["AssignRewardLocations","AssignRewardUsers","AddAwards","News","ApprovalRegistrations"];function yt(){const[e,t]=a.useState("AssignRewardLocations");return""==d((e=>e.adminState.token))?a.createElement(gt,null):a.createElement(ee.Z,{sx:{display:"flex"}},a.createElement(ae.ZP,null),a.createElement(ne.Z,{position:"fixed",sx:{zIndex:e=>e.zIndex.drawer+1}},a.createElement(ie.Z,{style:{justifyContent:"space-between"}},a.createElement(re.Z,{variant:"h6",noWrap:!0,component:"div"},"Админ панель"),a.createElement(ht,null))),a.createElement(te.ZP,{variant:"permanent",sx:{width:240,flexShrink:0,"& .MuiDrawer-paper":{width:240,boxSizing:"border-box"}}},a.createElement(ie.Z,null),a.createElement(ee.Z,{sx:{overflow:"auto"}},a.createElement(le.Z,null,wt.map(((e,n)=>a.createElement(oe.ZP,{key:e,disablePadding:!0,onClick:()=>{t(Et[n])}},a.createElement(ce.Z,null,a.createElement(se.Z,null,n%2==0?a.createElement(me.Z,null):a.createElement(ue.Z,null)),a.createElement(de.Z,{primary:e})))))))),a.createElement(ee.Z,{component:"main",sx:{flexGrow:1,p:3,overflow:"auto",maxHeight:"caLC(100vh - 64px)"},className:"scrollbar"},a.createElement(ie.Z,null),a.createElement(re.Z,{variant:"h4",sx:{marginBottom:2}},wt[Et.findIndex((t=>t==e))]),a.createElement(ut,{activeSection:e})))}const xt=(0,u.oM)({name:"authBlurState",initialState:{blur:!1},reducers:{setAuthBlur:(e,t)=>{let{payload:n}=t;e.blur=n}}}),{setAuthBlur:bt}=xt.actions,Zt=xt,Ct=(0,u.oM)({name:"userState",initialState:{token:""},reducers:{setUserToken:(e,t)=>{let{payload:n}=t;document.cookie=`usertoken=${n}; path=/;`,e.token=n}}}),{setUserToken:St}=Ct.actions,kt=Ct,At=()=>{const{pathname:e}=(0,l.TH)();return e.includes("admin")||(()=>{const e=window.Telegram.WebApp,t=m();console.log(e.initDataUnsafe);const n={dto:{tgId:e.initDataUnsafe.user.id,phoneNumber:e.initDataUnsafe.user.phone_number||"",firstName:e.initDataUnsafe.user.first_name,lastName:e.initDataUnsafe.user.last_name,username:e.initDataUnsafe.user.username,photoUrl:`https://t.me/i/userpic/160/${e.initDataUnsafe.user.id}.jpg`,authDate:e.initDataUnsafe.auth_date,hash:e.initDataUnsafe.hash},file:""},[i,l]=R.useAuthorizeMutation(),[r,o]=R.useRegistrationMutation();(0,a.useEffect)((()=>{i(n)}),[]),(0,a.useEffect)((()=>{l.error?("Current user is not registered"==l.error.data&&r(n),"Current user is not approved by admin"==l.error.data&&t(bt(!0))):l.data&&t(St(l.data.token))}),[l]),(0,a.useEffect)((()=>{o.data&&200==o.data.originalStatus&&t(bt(!0))}),[o])})(),(0,a.useEffect)((()=>{const e=localStorage.getItem("lastReload"),t=Math.floor((new Date).getTime()/1e3);(null==e||+e+2<t)&&(localStorage.setItem("lastReload",`${t}`),location.reload())}),[]),a.createElement(l.Z5,null,a.createElement(l.AW,{path:"/",element:a.createElement(D,null)},a.createElement(l.AW,{index:!0,element:a.createElement(K,null)}),a.createElement(l.AW,{path:"admin",element:a.createElement(yt,null)})))};var It=n(9655);const Bt=(0,n(4791).UY)({[kt.name]:kt.reducer,[b.name]:b.reducer,[T.name]:T.reducer,[g.name]:g.reducer,[Zt.name]:Zt.reducer,[qe.name]:qe.reducer,[Me.reducerPath]:Me.reducer,[R.reducerPath]:R.reducer}),zt=(0,u.xC)({reducer:Bt,middleware:e=>e().concat(Me.middleware,R.middleware)},window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());var Tt=n(4155);const Nt=document.querySelector("#wrap");(0,i.s)(Nt).render(a.createElement(It.VK,{basemname:`/${Tt.env.PUBLIC_URL}`},a.createElement(s.zt,{store:zt},a.createElement(At,null))))}},i={};function l(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}};return a[e](n,n.exports,l),n.exports}l.m=a,e=[],l.O=(t,n,a,i)=>{if(!n){var r=1/0;for(d=0;d<e.length;d++){n=e[d][0],a=e[d][1],i=e[d][2];for(var o=!0,c=0;c<n.length;c++)(!1&i||r>=i)&&Object.keys(l.O).every((e=>l.O[e](n[c])))?n.splice(c--,1):(o=!1,i<r&&(r=i));if(o){e.splice(d--,1);var s=a();void 0!==s&&(t=s)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,a,i]},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,a){if(1&a&&(e=this(e)),8&a)return e;if("object"==typeof e&&e){if(4&a&&e.__esModule)return e;if(16&a&&"function"==typeof e.then)return e}var i=Object.create(null);l.r(i);var r={};t=t||[null,n({}),n([]),n(n)];for(var o=2&a&&e;"object"==typeof o&&!~t.indexOf(o);o=n(o))Object.getOwnPropertyNames(o).forEach((t=>r[t]=()=>e[t]));return r.default=()=>e,l.d(i,r),i},l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.p="/",(()=>{var e={179:0};l.O.j=t=>0===e[t];var t=(t,n)=>{var a,i,r=n[0],o=n[1],c=n[2],s=0;if(r.some((t=>0!==e[t]))){for(a in o)l.o(o,a)&&(l.m[a]=o[a]);if(c)var d=c(l)}for(t&&t(n);s<r.length;s++)i=r[s],l.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return l.O(d)},n=self.webpackChunkwebpack_to_study=self.webpackChunkwebpack_to_study||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=l.O(void 0,[690],(()=>l(6603)));r=l.O(r)})();